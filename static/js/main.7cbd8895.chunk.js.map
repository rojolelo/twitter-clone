{"version":3,"sources":["components/SearchResult.js","components/SearchContainer.js","components/Header.js","components/Tweet.js","components/WriteTweet.js","components/TimeLine.js","components/UserBox.js","components/LandingPage.js","components/RegisterPopUp.js","components/LoggedLanding.js","components/Loading.js","components/FollowButton.js","components/UnfollowButton.js","components/UserBoxInUserPage.js","components/UserPage.js","components/ChangeThings.js","App.js","serviceWorker.js","index.js"],"names":["SearchResult","props","image","result","profilepic","react_default","a","createElement","react_router_dom","to","id","className","src","firstName","SearchContainer","state","this","search","length","searchState","results","map","i","components_SearchResult","key","Component","usersArray","Header","searchResult","refSearch","React","createRef","Logout","_this","bind","Object","assertThisInitialized","LogIn","toggleSettings","window","location","replace","_this2","firebase","auth","onAuthStateChanged","user","email","currentUser","usersDB","database","ref","child","once","data","users","val","keys","then","setState","logged","_this3","regex","RegExp","current","value","count","test","push","x","toConsumableArray","Set","logOut","arr","comp","e","final","indexOf","filter","onChange","type","placeholder","components_SearchContainer","onClick","Tweet","name","message","likes","likesNumber","retweets","retweetedBy","retweetedByNumber","date","showTime","tweetId","likedByLogged","showRetweetedBy","matchingRetweeted","like","tweetsDB","loggedUser","Boolean","set","dislike","userid","console","log","retweet","Swal","fire","title","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","retweetDate","Date","toISOString","newRetweet","_this$props$tweet","tweet","tweetDate","timeAgo","concat","Math","floor","Fragment","index_es","icon","faRetweet","faReply","faHeart","faHamburger","userData","WriteTweet","refTweetText","sendTweet","writeTweet","cleanState","tweetData","refreshRender","tweetMessage","userEmail","update","maxLength","TimeLine","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","loading","following","userPage","tweetsToShow","updated","pageChanged","searchTweets","matchUsers","matchUsersRetweet","reRender","pathname","approved","tweets","matches","error","userId","tweetUser","find","matchs","_loop","followingUser","sort","b","timeA","getTime","components_WriteTweet","components_Tweet","UserBox","followers","tweetCount","coverpic","fromUndefinedToZero","style","height","width","backgroundSize","backgroundPosition","backgroundImage","LandingPage","logIn","emailRef","passwordRef","preventDefault","password","faSearch","faPeopleCarry","onSubmit","toggleRegisterPopUp","RegisterPopUp","register","refName","refEmail","refPassword","refUserId","alert","registerData","propsSent","LoggedLanding","folowers","catch","interval","setInterval","clearInterval","components_UserBox","components_TimeLine","Loading","FollowButton","follow","UnfollowButton","unfollow","UserBoxInUserPage","notFound","followingButton","sendToState","undefined","followedId","loggedEmail","followingKeys","j","alt","components_FollowButton","components_UnfollowButton","UserPage","loaded","backgroundColor","marginTop","components_UserBoxInUserPage","ChangeThings","profilePic","coverPic","completed","filesToUpload","uploadedFiles","profileLink","coverLink","profilePicHandler","profilePicFile","target","files","coverPicHandler","coverPicFile","upload","profileStorageRef","storage","coverStorageRef","put","on","snapshot","percentage","bytesTransferred","totalBytes","getDownloadURL","url","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","firstCheck","stateSetted","App","showPopUp","loadingFalse","signInWithEmailAndPassword","code","signOut","newUser","createUserWithEmailAndPassword","reload","_this4","basename","process","react_router","exact","path","render","components_Header","components_ChangeThings","components_UserPage","components_LoggedLanding","_this5","components_RegisterPopUp","components_Loading","components_LandingPage","_this6","renderLogged","renderNoLogged","hostname","match","ReactDOM","App_App","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.7cbd8895.chunk.js","sourcesContent":["import React from 'react';\r\nimport {Link} from \"react-router-dom\";\r\n\r\nconst SearchResult = (props) => {\r\n    let image;\r\n\r\n    if (!props.result.profilepic) {\r\n        image = \"https://cdn.britannica.com/67/197567-131-1645A26E.jpg\"\r\n    } else {\r\n        image = props.result.profilepic\r\n    }\r\n    return ( \r\n        <Link to={props.result.id}>\r\n        <div className=\"search-result-container\">\r\n            <img id=\"search-picture\" src={image} />\r\n            <span className=\"search-result-name\">{props.result.firstName}</span>\r\n            <span className=\"search-result-id\">@{props.result.id}</span>\r\n        </div>\r\n        </Link>\r\n     );\r\n}\r\n \r\nexport default SearchResult;","import React, { Component } from 'react';\r\nimport SearchResult from './SearchResult';\r\n\r\nclass SearchContainer extends Component {\r\n    state = {  }\r\n    render() { \r\n        if (this.props.search.length < 1) return null;\r\n        if (this.props.searchState === \"\") return null;\r\n        const results = this.props.search;\r\n        return ( \r\n            <div className=\"search-container-container\">\r\n\r\n                {results.map((result, i) => {\r\n                    return <SearchResult key={i} result={result}/>\r\n                })}                \r\n\r\n                <div className=\"search-result-container\">\r\n                    <h5 className=\"search-result-name\">Search for more...</h5>\r\n                </div>\r\n            </div>\r\n         );\r\n    }\r\n}\r\n \r\nexport default SearchContainer;","import React, { Component } from 'react';\r\nimport firebase from  \"firebase\";\r\nimport SearchContainer from './SearchContainer';\r\nimport {Link} from \"react-router-dom\";\r\n\r\n;\r\nlet usersArray = [];\r\nlet logged = false;\r\nlet firstCheck = false;\r\n\r\nclass Header extends Component {\r\n    state = { \r\n        search: \"\",\r\n        searchResult : [],\r\n        profilepic: \"https://cdn.britannica.com/67/197567-131-1645A26E.jpg\"\r\n     }\r\n    refSearch = React.createRef();\r\n\r\n    Logout = this.Logout.bind(this)\r\n    search = this.search.bind(this)\r\n    LogIn = this.LogIn.bind(this)    \r\n\r\n    LogIn() {\r\n        window.location.replace(\"/twitter-clone/\")        \r\n    }\r\n\r\n    componentDidMount(){\r\n        firebase.auth().onAuthStateChanged((user) => {        \r\n            if (user) { \r\n              const email = firebase.auth().currentUser.email;\r\n              const usersDB = firebase.database().ref().child(\"users\");\r\n              let profilepic = \"\";\r\n\r\n              usersDB.once(\"value\", data =>{\r\n                  const users = data.val();\r\n                  const keys = Object.keys(users);\r\n\r\n                  for (let i = 0; i < keys.length; i++) {\r\n                      if (users[keys[i]][\"email\"] === email) {\r\n                          if (!!users[keys[i]][\"profilepic\"]) {\r\n                               profilepic= users[keys[i]][\"profilepic\"];\r\n                               break;                                \r\n                          }\r\n                      }\r\n                  }                    \r\n              }).then(() => {\r\n                  if (profilepic.length > 0){\r\n                      this.setState({\r\n                          profilepic,\r\n                          logged: true\r\n                      })\r\n                  } else {\r\n                      this.setState({\r\n                          logged:true\r\n                        })\r\n                  }\r\n              })\r\n              \r\n            }\r\n          });\r\n    }\r\n\r\n    search() {     \r\n        let searchResult=[];\r\n        usersArray= []; \r\n        const usersDB = firebase.database().ref().child(\"users\")\r\n        const regex = new RegExp(this.refSearch.current.value, \"i\");\r\n\r\n        if (this.refSearch.current.value === \"\") {\r\n            this.setState({\r\n                search: \"\"\r\n            })\r\n            return null;\r\n        };\r\n\r\n        usersDB.once(\"value\", data =>{\r\n            const users = data.val();\r\n            const keys = Object.keys(users)            \r\n            let count = 0;\r\n\r\n            for (let i = 0; i < keys.length; i++)   {\r\n                if (count > 5) return null;\r\n                \r\n                if (regex.test(users[keys[i]][\"id\"]) || regex.test(users[keys[i]][\"firstName\"])) {\r\n                    usersArray.push(users[keys[i]]);\r\n                    count++;\r\n                }\r\n            }\r\n            \r\n        }).then(x => {           \r\n            searchResult = [... new Set (usersArray)];\r\n            this.setState({\r\n                searchResult, \r\n                search: this.refSearch.current.value\r\n            })\r\n        })\r\n    }\r\n\r\n    Logout(){\r\n        this.props.logOut();\r\n    }\r\n\r\n    toggleSettings = () => {\r\n        this.props.toggleSettings();\r\n    }\r\n\r\n    render() { \r\n        \r\n        if (this.state.searchResult.length > 0) this.state.searchResult = getUnique(this.state.searchResult, \"id\");\r\n        var next = false;\r\n\r\n        function getUnique(arr,comp){\r\n\r\n            //store the comparison  values in array\r\n            const unique =  arr.map(e=> e[comp]). \r\n                    // store the keys of the unique objects\r\n                    map((e,i,final) =>final.indexOf(e) === i && i) \r\n                    // eliminate the dead keys & return unique objects\r\n                    .filter((e)=> arr[e]).map(e=>arr[e]);\r\n\r\n            return unique\r\n        }\r\n\r\n        \r\n////////////////////////////////////////////////////////////////////////\r\n       \r\n        if (this.state.logged) {\r\n            return ( \r\n                <div className=\"header-container\">\r\n                    <div className=\"header-left\">\r\n                    <Link to=\"/\">\r\n                        <h3 className=\"header-button\">Home</h3>\r\n                    </Link>\r\n                    <h3 className=\"header-button\">Notifications</h3>\r\n                    <h3 className=\"header-button\">Messages</h3>\r\n                    </div>\r\n                    <div className=\"header-mid\">\r\n                    <h3 id=\"header-logo\">Logo</h3>    \r\n                    </div>\r\n                    <div className=\"header-right\">\r\n                    <input onChange={this.search} ref={this.refSearch} type=\"text\" id=\"header-search\" placeholder=\"Search...\"/>\r\n                    <SearchContainer search={this.state.searchResult} searchState={this.state.search}/>\r\n                    <img id=\"header-profile-picture\" onClick={this.toggleSettings} src={this.state.profilepic}/>\r\n                    <button id=\"header-logout\" onClick={this.Logout}>Log Out</button>\r\n                    </div>\r\n                </div>\r\n            );\r\n        } else {\r\n            return (\r\n                <div className=\"header-container\">\r\n                    <div className=\"header-left\">\r\n                        <h3 className=\"header-button header-logout\">Home</h3>\r\n                        <h3 className=\"header-button header-logout\">Notifications</h3>\r\n                        <h3 className=\"header-button header-logout\">Messages</h3>\r\n                    </div>\r\n                    <div className=\"header-mid\">\r\n                        <h3 id=\"header-logo\">Logo</h3>    \r\n                    </div>\r\n                    <div className=\"header-right\">\r\n                        <input onChange={this.search} ref={this.refSearch} type=\"text\" id=\"header-search\" placeholder=\"Search...\"/>\r\n                        <SearchContainer search={this.state.searchResult} searchState={this.state.search} />\r\n                        <img id=\"header-profile-picture\" src=\"https://d1nhio0ox7pgb.cloudfront.net/_img/o_collection_png/green_dark_grey/512x512/plain/user.png\"/>\r\n                        <button id=\"header-logout\" onClick={this.LogIn}>Log In</button>\r\n                    </div>\r\n                </div>\r\n            )\r\n        }\r\n    }\r\n}\r\n \r\nexport default Header;","/* PARTE SUPERIOR: LLEVA, ID, HORA\r\n    PARTE MEDIA: MENSAJE\r\n    PARTE BAJA: LIKES, RESPUESTAS Y RETWEETS\r\n */\r\n\r\nimport React, { Component } from 'react';\r\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\";\r\nimport {faComment as faReply, faRetweet, faHeart, faHamburger, faHeartBroken} from \"@fortawesome/free-solid-svg-icons\";\r\nimport {Link} from \"react-router-dom\"\r\nimport firebase from \"firebase\";\r\nimport { thisExpression } from '@babel/types';\r\nimport Swal from \"sweetalert2\";\r\n\r\n class Tweet extends React.Component {\r\n\r\n    state = {\r\n        name: \"\",\r\n        user: \"\",\r\n        profilepic: false,\r\n        message: \"\",\r\n        likes: [],\r\n        likesNumber: \"\",\r\n        retweets: \"\",\r\n        retweetedBy :\"\",\r\n        retweetedByNumber: \"\",\r\n        date: \"\",\r\n        showTime: \"\",\r\n        tweetId: \"\",\r\n        likedByLogged: false,\r\n        showRetweetedBy: false,\r\n        matchingRetweeted: \"\",\r\n    }\r\n\r\n\r\n    componentDidMount(){\r\n        const {name, user, message, likes, retweets, retweetedBy, date, tweetId, likesNumber, retweetedByNumber, showRetweetedBy, matchingRetweeted } = this.props.tweet;\r\n        let profilepic = false;\r\n        \r\n        const tweetsDB = firebase.database().ref().child(\"tweets\").child(tweetId).child(\"likes\");\r\n        let email;\r\n        const usersDB = firebase.database().ref().child(\"users\");\r\n\r\n        if (!!firebase.auth().currentUser){\r\n            email = firebase.auth().currentUser.email\r\n        }\r\n\r\n        let loggedUser = \"\";\r\n\r\n        const tweetDate = new Date(date);\r\n        const thisMoment = new Date()\r\n        let timeAgo = (thisMoment-tweetDate)/1000;\r\n        let showTime = \"\";\r\n        \r\n        let likedByLogged = false;\r\n\r\n        \r\n\r\n        if        (timeAgo < 61) {\r\n            showTime = `${Math.floor(timeAgo)} seconds ago`\r\n        } else if (timeAgo < 3600) {\r\n            timeAgo = Math.floor(timeAgo / 60);\r\n            showTime = `${timeAgo} minutes ago`\r\n            if (timeAgo === 1) showTime = `${timeAgo} minute ago`\r\n        } else if (timeAgo < 86400) {\r\n            timeAgo = Math.floor(timeAgo / 3600);\r\n            showTime = `${timeAgo} hours ago`\r\n            if (timeAgo === 1) showTime = `${timeAgo} hour ago`\r\n        } else if (timeAgo < 604800) {\r\n            timeAgo = Math.floor(timeAgo / 86400);\r\n            showTime = `${timeAgo} days ago`\r\n            if (timeAgo === 1) showTime = `${timeAgo} day ago`\r\n        } else if (timeAgo < 2419200) {\r\n            timeAgo = Math.floor(timeAgo / 604800);\r\n            showTime = `${timeAgo} weeks ago`\r\n            if (timeAgo === 1) showTime = `${timeAgo} week ago`\r\n        } else if (timeAgo < 29030400) {\r\n            timeAgo = Math.floor(timeAgo / 2419200);\r\n            showTime = `${timeAgo} months ago`\r\n            if (timeAgo === 1) showTime = `${timeAgo} month ago`\r\n        } else {\r\n            timeAgo = Math.floor(timeAgo / 29030400);\r\n            showTime = `${timeAgo} years ago`\r\n            if (timeAgo === 1) showTime = `${timeAgo} year ago`\r\n        }\r\n\r\n        usersDB.once(\"value\", data =>{\r\n            const users = data.val();\r\n            const keys = Object.keys(users);\r\n            let count= 0;\r\n\r\n            for (let i = 0; i < keys.length; i++){\r\n                if (count === 2) break;\r\n                if (email === users[keys[i]][\"email\"]) {\r\n                    loggedUser = users[keys[i]][\"id\"];\r\n                    count++;\r\n                }\r\n\r\n                if (user === users[keys[i]][\"id\"]) {\r\n                    if (!!users[keys[i]][\"profilepic\"]) {\r\n                        profilepic = users[keys[i]][\"profilepic\"];\r\n                        count++;\r\n                    } else {\r\n                        profilepic = \"https://cdn.britannica.com/67/197567-131-1645A26E.jpg\"\r\n                        count++;\r\n                    }\r\n                }\r\n            }\r\n        }).then(x => {\r\n            tweetsDB.once(\"value\", data=>{\r\n                const likes = data.val();\r\n    \r\n                if (!likes) {\r\n                    return null\r\n                } else {\r\n                    for (let i = 0; i < likes.length; i++){\r\n                        if (likes[i] === loggedUser) {\r\n                            likedByLogged = true;\r\n                        }\r\n                    }\r\n                }\r\n            }).then(x => {\r\n                this.setState({\r\n                    name, user, message, likes, retweets, retweetedBy, date, showTime, tweetId, likedByLogged, likesNumber, retweetedByNumber, showRetweetedBy, matchingRetweeted, profilepic\r\n                })\r\n            })\r\n        })\r\n\r\n        \r\n    }\r\n\r\n    like = () => {\r\n        let email;\r\n\r\n        if (!!firebase.auth().currentUser){\r\n            email = firebase.auth().currentUser.email\r\n        } else {\r\n            return null;\r\n        }\r\n\r\n\r\n        const tweetsDB = firebase.database().ref().child(\"tweets\").child(this.state.tweetId).child(\"likes\");\r\n        const usersDB = firebase.database().ref().child(\"users\");\r\n\r\n        let loggedUser = \"\";\r\n        let likes = [];\r\n\r\n        if (!Boolean(email))  return null;\r\n\r\n        usersDB.once(\"value\", data =>{\r\n            const users = data.val();\r\n            const keys = Object.keys(users);\r\n\r\n            for (let i = 0; i < keys.length; i++){\r\n                if (email === users[keys[i]][\"email\"]) {\r\n                    loggedUser = users[keys[i]][\"id\"];\r\n                    break;\r\n                }\r\n            }\r\n        })\r\n\r\n        tweetsDB.once(\"value\", data => {\r\n            likes = data.val()\r\n            if (!likes) {\r\n                likes = [loggedUser];\r\n            } else {\r\n                likes.push(loggedUser);\r\n            }\r\n        }).then(x =>{\r\n            tweetsDB.set(likes);\r\n\r\n            this.setState({\r\n                likedByLogged: true,\r\n                likesNumber: this.state.likesNumber+1})\r\n        })\r\n\r\n\r\n    }\r\n\r\n    dislike = () => {\r\n        let email;\r\n\r\n        if (!!firebase.auth().currentUser){\r\n            email = firebase.auth().currentUser.email\r\n        } else {\r\n            return null;\r\n        }\r\n\r\n        const tweetsDB = firebase.database().ref().child(\"tweets\").child(this.state.tweetId).child(\"likes\");\r\n        const usersDB = firebase.database().ref().child(\"users\");\r\n\r\n        let loggedUser = \"\";\r\n        let likes = [];\r\n\r\n        usersDB.once(\"value\", data =>{\r\n            const users = data.val();\r\n            const keys = Object.keys(users);\r\n\r\n            for (let i = 0; i < keys.length; i++){\r\n                if (email === users[keys[i]][\"email\"]) {\r\n                    loggedUser = users[keys[i]][\"id\"];\r\n                    break;\r\n                }\r\n            }\r\n        })\r\n\r\n        tweetsDB.once(\"value\", data => {\r\n            likes = data.val()\r\n            if (likes.length === 1) {\r\n                likes = [];\r\n            } else {\r\n                likes = likes.filter(userid => {\r\n                    console.log(userid !== loggedUser)\r\n                    return userid !== loggedUser\r\n                });\r\n            }\r\n        }).then(x =>{\r\n            console.log(likes)\r\n            tweetsDB.set(likes)\r\n            this.setState({\r\n                likedByLogged: false,\r\n                likesNumber: this.state.likesNumber-1\r\n            })\r\n        })\r\n\r\n\r\n    }\r\n\r\n    retweet =() => {\r\n        \r\n        let email;\r\n\r\n        if (!!firebase.auth().currentUser){\r\n            email = firebase.auth().currentUser.email\r\n        } else {\r\n            return null;\r\n        }\r\n        \r\nconst usersDB = firebase.database().ref().child(\"users\");\r\n        const tweetsDB = firebase.database().ref().child(\"tweets\").child(this.state.tweetId).child(\"retweetedBy\");\r\n        \r\n        let loggedUser = \"\";\r\n\r\n\r\n        Swal.fire({\r\n            title: 'Wanna retweet this?',\r\n            type: 'info',\r\n            showCancelButton: true,\r\n            confirmButtonColor: '#1da1f2',\r\n            cancelButtonColor: '#d33',\r\n            confirmButtonText: 'Yes, Retweet'\r\n          }).then((result) => {\r\n            if (result.value) {\r\n\r\n                usersDB.once(\"value\", data =>{\r\n                    const users = data.val();\r\n                    const keys = Object.keys(users);\r\n        \r\n                    for (let i = 0; i < keys.length; i++){\r\n                        if (users[keys[i]][\"email\"] === email) {\r\n                            loggedUser = users[keys[i]][\"id\"];\r\n                            break;\r\n                        }\r\n                    }\r\n        \r\n                    \r\n                }).then(x =>{\r\n                    tweetsDB.once(\"value\", data =>{\r\n                        let retweetedBy = data.val()\r\n                        const retweetDate = new Date().toISOString();\r\n                        const newRetweet = [loggedUser, retweetDate];\r\n                        /* let newArray = [];\r\n                        \r\n                        for (let i = 0; i < keys.length; i++){\r\n                            newArray.push(retweetedBy[keys[i]])\r\n                        } */\r\n\r\n                        if (!retweetedBy) {\r\n                            retweetedBy = [newRetweet];\r\n                        } else {\r\n                            retweetedBy.push(newRetweet);\r\n                        }\r\n        \r\n                        tweetsDB.set(retweetedBy);\r\n        \r\n                    }).then(x=>{\r\n                        Swal.fire(\r\n                            'Retweeted!',\r\n                            \"\",\r\n                            'success'\r\n                          )\r\n                          this.setState({\r\n                              retweetedByNumber: this.state.retweetedByNumber+1\r\n                          })\r\n                    })\r\n        \r\n        \r\n                })\r\n\r\n\r\n              \r\n            }\r\n          })\r\n\r\n        \r\n\r\n    }\r\n\r\n     render(){   \r\n\r\n        let image;\r\n\r\n        if (!this.state.profilepic) {\r\n            image = \"https://firebasestorage.googleapis.com/v0/b/directorio-de-negocios-a257b.appspot.com/o/whitefondo.jpg?alt=media&token=22ddf22f-d657-43d7-a472-c115e58c1812\";\r\n        } else {\r\n            image = this.state.profilepic;\r\n        }\r\n\r\n        return ( \r\n            <React.Fragment>\r\n                \r\n                <div className=\"Contenedor\">\r\n\r\n                { this.state.showRetweetedBy ?\r\n                <div className=\"retweetedBy\">\r\n                    <FontAwesomeIcon icon={faRetweet}/> <span>Retweet by {this.state.matchingRetweeted[this.state.matchingRetweeted.length-1][0]}</span>\r\n                </div> : null}\r\n\r\n                <div className=\"tweet-container\">            \r\n                    <div className=\"tweet-picture\">\r\n                        <img id=\"tweet-picture\" src={image}/>\r\n                    </div>\r\n\r\n                    <div className=\"tweet-inside-container\">\r\n                        <div className=\"tweet-top\">\r\n                            <Link to={`/${this.state.user}`}>\r\n                            <span className=\"tweet-userName\">{this.state.name} </span>\r\n                            </Link>\r\n                            <Link to={`/${this.state.user}`}>\r\n                            <span className=\"tweet-userId\">@{this.state.user}</span>\r\n                            </Link>\r\n                            <span className=\"tweet-date\">{this.state.showTime}</span>\r\n                        </div>\r\n\r\n                        <div className=\"tweet-mid\">\r\n                            <div className=\"tweet-mid-message\">\r\n                                {this.state.message}\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"tweet-bot\">\r\n                            <div className=\"tweet-bot-icon\">\r\n                                <FontAwesomeIcon id=\"react-icon\" icon={faReply}/>\r\n                            </div>\r\n                            <div className=\"tweet-bot-icon\">\r\n                                <FontAwesomeIcon id=\"react-icon\" onClick={this.retweet}  icon={faRetweet}/>\r\n                                {this.state.retweetedByNumber > 0 ? <span>{this.state.retweetedByNumber}</span> : null}\r\n                            </div>\r\n                            <div className=\"tweet-bot-icon\">    \r\n                                {this.state.likedByLogged ? <FontAwesomeIcon id=\"react-icon\" className=\"liked-heart\" icon={faHeart} onClick={this.dislike} /> : <FontAwesomeIcon id=\"react-icon\" icon={faHeart} onClick={this.like} />}                                \r\n                                {this.state.likesNumber > 0 ? <span>{this.state.likesNumber}</span> : null}\r\n                            </div>\r\n                            <div className=\"tweet-bot-icon\">\r\n                                <FontAwesomeIcon id=\"react-icon\" icon={faHamburger}/>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                </div>\r\n            </React.Fragment>\r\n        );}\r\n }\r\n  \r\n export default Tweet;","import React, {Component} from 'react'\r\nimport firebase from \"firebase\";\r\n\r\nvar userData = {};\r\n\r\nclass WriteTweet extends Component {\r\n    state = { \r\n        tweet : \"\",\r\n        profilepic: false,\r\n     }\r\n    refTweetText = React.createRef();\r\n    sendTweet=this.sendTweet.bind(this);\r\n    writeTweet=this.writeTweet.bind(this);\r\n    cleanState = this.cleanState.bind(this);\r\n\r\n    componentDidMount(){\r\n        const usersDB = firebase.database().ref().child(\"users\");\r\n        const email = firebase.auth().currentUser.email;\r\n        let profilepic = false;\r\n\r\n        usersDB.once(\"value\", data =>{\r\n            const users = data.val();\r\n            const keys = Object.keys(users);\r\n\r\n            for (let i = 0; i < keys.length; i++){\r\n                if (email === users[keys[i]][\"email\"]){\r\n                    if (!!users[keys[i]][\"profilepic\"]){\r\n                        profilepic = users[keys[i]][\"profilepic\"];\r\n                    } else {\r\n                        profilepic = \"https://cdn.britannica.com/67/197567-131-1645A26E.jpg\";\r\n                    }\r\n                }\r\n            }\r\n        }).then(() =>{\r\n            this.setState({\r\n                profilepic\r\n            })\r\n        })\r\n    }\r\n\r\n    cleanState(tweetData,tweetId){\r\n        this.props.refreshRender(tweetData,tweetId);\r\n        this.setState({\r\n            tweet: \"\"\r\n        })\r\n    }\r\n\r\n    writeTweet(){\r\n        this.setState({\r\n            tweet : this.refTweetText.current.value\r\n        })\r\n    }\r\n\r\n    sendTweet(){\r\n        const tweetMessage= this.state.tweet;\r\n\r\n        if (tweetMessage.length === 0) return null;\r\n        \r\n        const userEmail = firebase.auth().currentUser.email;\r\n        const tweetsDB = firebase.database().ref().child(\"tweets\")\r\n        const usersDB = firebase.database().ref().child(\"users\")\r\n        \r\n            usersDB.once(\"value\", data => {\r\n                const users = data.val();\r\n                const keys = Object.keys(users)\r\n\r\n                for (let i = 0; i < keys.length; i++){\r\n                    if (userEmail === users[keys[i]].email) {\r\n                        userData[\"email\"] = userEmail;\r\n                        userData[\"name\"] = users[keys[i]].firstName;\r\n                        userData[\"userId\"] = users[keys[i]].id;\r\n                    }\r\n                }\r\n            }).then(x => {\r\n                const tweetDate= new Date().toISOString();\r\n                const tweetData = {\r\n                    date : tweetDate,\r\n                    email : userEmail,\r\n                    message : tweetMessage,\r\n                    name : userData[\"name\"],\r\n                    user: userData[\"userId\"]\r\n                }\r\n                const tweetId = tweetsDB.push().key;\r\n                tweetData[\"tweetId\"] = tweetId;\r\n                tweetsDB.child(tweetId).update(tweetData)\r\n\r\n                this.cleanState(tweetData,tweetId)            \r\n            })\r\n        \r\n        \r\n\r\n        \r\n    }\r\n\r\n    \r\n\r\n    render() { \r\n\r\n        let image;\r\n\r\n        if (!this.state.profilepic) {\r\n            image = \"https://firebasestorage.googleapis.com/v0/b/directorio-de-negocios-a257b.appspot.com/o/whitefondo.jpg?alt=media&token=22ddf22f-d657-43d7-a472-c115e58c1812\";\r\n        } else {\r\n            image = this.state.profilepic;\r\n        }\r\n\r\n\r\n        return ( \r\n            <div className=\"write-container\">\r\n                <div className=\"write-picture-container\">\r\n                <img id=\"write-profile-picture\" src={image}/>\r\n                </div>\r\n                \r\n                <div className=\"write-input-container\">\r\n                    <textarea ref={this.refTweetText} onChange={this.writeTweet} value={this.state.tweet} maxLength=\"250\" className=\"write-input\" type=\"text\" placeholder=\"What's happening?\" />\r\n                    <div className=\"write-bottom-container\">\r\n                        <button type=\"button\" className=\"write-tweet\" onClick={this.sendTweet}>Tweet</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n         );\r\n    }\r\n}\r\n \r\nexport default WriteTweet;","import React, { Component } from 'react';\r\nimport Tweet from './Tweet';\r\nimport firebase from \"firebase\";\r\nimport WriteTweet from './WriteTweet';\r\nimport { faTintSlash } from '@fortawesome/free-solid-svg-icons';\r\n\r\n\r\nclass TimeLine extends React.Component {\r\n\r\n  constructor(props) {\r\n      super(props);\r\n\r\n      this.state = { \r\n          loading: false,\r\n          following: [],\r\n          userPage: true,\r\n          tweetsToShow: [],\r\n          updated: false,\r\n          pageChanged:false,\r\n          userData: {},\r\n      }\r\n\r\n      this.refreshRender=this.refreshRender.bind(this)\r\n      this.searchTweets=this.searchTweets.bind(this)\r\n      this.matchUsers=this.matchUsers.bind(this)\r\n      this.matchUsersRetweet=this.matchUsersRetweet.bind(this)\r\n      this.reRender = this.reRender.bind(this)\r\n    }\r\n    \r\n    \r\n    componentDidMount(){\r\n      this.searchTweets()\r\n    }\r\n         \r\n     reRender(tweetsToShow, userPage){         \r\n       this.setState({tweetsToShow, updated:true, pageChanged: false, userPage})\r\n     }\r\n    \r\n     //THIS IS FOR UPDATING 1 TWEET, WHEN WRITTEN AND SENT.\r\n     refreshRender(tweetData, tweetId){\r\n       this.setState({\r\n         tweetsToShow: [...this.state.tweetsToShow, tweetData]\r\n       })\r\n\r\n\r\n       \r\n    }\r\n    //////////////////////////////////////////////////////////\r\n\r\n    searchTweets() {\r\n        let tweetsToShow = [];\r\n\r\n        var userData = {};\r\n\r\n      const tweetsDB = firebase.database().ref().child(\"tweets\");\r\n      const usersDB = firebase.database().ref().child(\"users\");\r\n           \r\n\r\n          usersDB.once(\"value\", data => {\r\n            const users = data.val();\r\n            const keys = Object.keys(users)\r\n\r\n            const id = window.location.pathname.replace(\"/twitter-clone/\", \"\");\r\n            userData[\"userPage\"] = id.length > 1;            \r\n            \r\n\r\n            let userEmail;\r\n            if (!userData[\"userPage\"]){     \r\n            userEmail = firebase.auth().currentUser.email;\r\n            }\r\n            \r\n            \r\n            \r\n\r\n            if (userData[\"userPage\"]) {\r\n              for (let i = 0; i < keys.length; i++) {\r\n                if (id === users[keys[i]][\"id\"] ) {\r\n                    userData[\"email\"] = users[keys[i]].email\r\n                    userData[\"name\"] = users[keys[i]].firstName\r\n                    userData[\"id\"] = users[keys[i]].id\r\n                    userData[\"following\"] = [id];\r\n                }\r\n            }\r\n\r\n            } else {\r\n\r\n              for (let i = 0; i < keys.length; i++) {\r\n                \r\n                  if (userEmail === users[keys[i]][\"email\"] ) {\r\n                      userData[\"email\"] = users[keys[i]].email\r\n                      userData[\"name\"] = users[keys[i]].firstName\r\n                      userData[\"id\"] = users[keys[i]].id\r\n                      userData[\"following\"] = users[keys[i]].following;\r\n                  }\r\n              }\r\n            }\r\n\r\n\r\n            //THIS ADD TO FOLLOWING IS FOR SHOWING OWN USER'S TWEETS\r\n            if (typeof(userData[\"following\"]) === \"undefined\") {\r\n              userData[\"following\"] = [userData[\"id\"]];\r\n            } else {\r\n              userData[\"following\"].push(userData[\"id\"]);\r\n            }            \r\n        }).then(x =>{\r\n\r\n            tweetsDB.once(\"value\", data => {\r\n              let tweets = data.val()\r\n              const keys = Object.keys(tweets)\r\n              let count = 0;\r\n              let approved;\r\n              for (let i = 0; i < keys.length; i++){\r\n\r\n                approved = false;\r\n                \r\n\r\n                if (this.matchUsers(userData[\"following\"],tweets[keys[i]][\"user\"])) {\r\n\r\n                  approved = true;\r\n\r\n                  \r\n                  \r\n                  //CHECK HOW MANY LIKES\r\n                  if (!!tweets[keys[i]][\"likes\"]){\r\n                    tweets[keys[i]][\"likesNumber\"]= tweets[keys[i]][\"likes\"].length;\r\n                  } else {\r\n                    tweets[keys[i]][\"likesNumber\"]= 0;\r\n                  }\r\n\r\n                  //NUMBER OF RETWEETS\r\n                  if(!!tweets[keys[i]][\"retweetedBy\"]) {\r\n                    tweets[keys[i]][\"retweetedByNumber\"] = tweets[keys[i]][\"retweetedBy\"].length;\r\n                  }\r\n\r\n                  \r\n                  tweets[keys[i]][\"orderingDate\"] = tweets[keys[i]][\"date\"];\r\n\r\n                  //SHOWRETWEETEDBY\r\n                  tweets[keys[i]][\"showRetweetedBy\"] = false;\r\n\r\n                  //PUSH FOUND TWEET\r\n                  /* tweetsToShow.push(tweets[keys[i]])\r\n                  count++; */\r\n                } \r\n\r\n                \r\n                if (this.matchUsersRetweet(userData[\"following\"],tweets[keys[i]][\"retweetedBy\"])) {\r\n\r\n                  approved = true;\r\n\r\n\r\n                  //CHECK HOW MANY LIKES\r\n                  if (!!tweets[keys[i]][\"likes\"]){\r\n                    tweets[keys[i]][\"likesNumber\"]= tweets[keys[i]][\"likes\"].length;\r\n                  } else {\r\n                    tweets[keys[i]][\"likesNumber\"]= 0;\r\n                  }\r\n\r\n                  //NUMBER OF RETWEETS\r\n                  if(!!tweets[keys[i]][\"retweetedBy\"]) {\r\n                    tweets[keys[i]][\"retweetedByNumber\"] = tweets[keys[i]][\"retweetedBy\"].length;\r\n                  }\r\n\r\n                  var matches = this.matchUsersRetweet(userData[\"following\"],tweets[keys[i]][\"retweetedBy\"]);\r\n                  \r\n                  tweets[keys[i]][\"matchingRetweeted\"] = matches;\r\n\r\n                  //ITS SUPPOSED TO TAKE THE LAST DATE\r\n                  tweets[keys[i]][\"orderingDate\"] = matches[matches.length-1][1];\r\n                  \r\n                  //SHOWRETWEETEDBY\r\n                  tweets[keys[i]][\"showRetweetedBy\"] = true;\r\n\r\n                  //PUSH FOUND TWEET\r\n                 \r\n                }\r\n\r\n                if (approved) {\r\n                tweetsToShow.push(tweets[keys[i]])\r\n                  count++;\r\n                }\r\n              }      \r\n              \r\n            \r\n            },error => {console.log(error)})\r\n            .then( x => {\r\n            this.reRender(tweetsToShow, userData[\"userPage\"]);\r\n          })\r\n\r\n        })\r\n\r\n\r\n           \r\n      \r\n    }\r\n\r\n    matchUsers(userId, tweetUser) { \r\n      if (typeof(userId) === \"string\") userId = [userId];\r\n      return Boolean(userId.find(userId =>{\r\n        return userId === tweetUser\r\n      }))\r\n    }\r\n\r\n    matchUsersRetweet(following, retweetedBy) { \r\n\r\n      if (!retweetedBy) return false;\r\n\r\n      let matchs = [];\r\n      var found = undefined;\r\n\r\n      for (let i = 0; i<retweetedBy.length; i++){\r\n        found = following.find(followingUser =>{\r\n          return followingUser === retweetedBy[i][0]\r\n        })\r\n        if (!!found) {\r\n          matchs.push(retweetedBy[i])\r\n        }\r\n      }\r\n\r\n      if (matchs.length === 0) {\r\n        return false;\r\n      }\r\n\r\n      return matchs;\r\n    }\r\n    \r\n\r\n    \r\n    render() { \r\n  \r\n            // SORTING FROM DATE\r\n            this.state.tweetsToShow = this.state.tweetsToShow.sort( (a,b) => {          \r\n              var timeA = new Date(a[\"orderingDate\"]).getTime()\r\n              var timeB = new Date(b[\"orderingDate\"]).getTime()\r\n              return timeB - timeA;\r\n              })\r\n\r\n        return ( \r\n            <div className=\"timeLine-container\">\r\n\r\n              {this.state.userPage ?  null : <WriteTweet refreshRender={this.refreshRender}/>}\r\n\r\n              {this.state.tweetsToShow.map((tweet,i) => {                    \r\n                      return (\r\n                          <Tweet key={i} tweet={tweet}/>\r\n                      )\r\n                  })\r\n              }\r\n            </div>\r\n         );\r\n    }\r\n}\r\n \r\nexport default TimeLine;","import React, { Component } from 'react';\r\nimport {Link} from \"react-router-dom\";\r\nimport firebase from \"firebase\";\r\n\r\nclass UserBox extends Component {\r\n    state = { \r\n        name: \"\",\r\n        id: \"\",\r\n        following: \"\",\r\n        followers : \"\",\r\n        tweetCount: \"\",\r\n        profilepic: false,\r\n        coverpic: false,\r\n     }\r\n\r\n     componentDidMount(){\r\n         const usersDB = firebase.database().ref().child(\"users\");\r\n         const tweetsDB = firebase.database().ref().child(\"tweets\");\r\n         const email = firebase.auth().currentUser.email;\r\n\r\n         function fromUndefinedToZero (data) {\r\n            if (typeof(data) === \"undefined\") return 0;\r\n            return data.length;\r\n        }\r\n\r\n         let name = \"\",\r\n            id = \"\",\r\n            following = \"\",\r\n            followers = \"\",\r\n            tweetCount = 0,\r\n            profilepic = false,\r\n            coverpic = false;\r\n\r\n         usersDB.once(\"value\", data => {\r\n            const users = data.val();\r\n            const keys = Object.keys(users);\r\n\r\n            for (let i = 0; i < keys.length; i++){\r\n                if (email === users[keys[i]][\"email\"]) {\r\n                    name = users[keys[i]][\"firstName\"];\r\n                    id = users[keys[i]][\"id\"];\r\n                    following = fromUndefinedToZero(users[keys[i]][\"following\"]);\r\n                    followers = fromUndefinedToZero(users[keys[i]][\"followers\"]);\r\n                    profilepic = users[keys[i]][\"profilepic\"]\r\n                    coverpic = users[keys[i]][\"coverpic\"]\r\n                    break;                    \r\n                }\r\n            }\r\n         }).then(x => {\r\n            tweetsDB.once(\"value\", data => {\r\n                const tweets = data.val();\r\n                const keys = Object.keys(tweets);\r\n\r\n                for (let i = 0; i < keys.length; i++) {\r\n                    if (email === tweets[keys[i]][\"email\"]) {\r\n                        tweetCount++;\r\n                    }\r\n                }\r\n            }).then(x => {\r\n                if (!profilepic) {\r\n                    profilepic = \"https://cdn.britannica.com/67/197567-131-1645A26E.jpg\"\r\n                }\r\n                if (!coverpic) {\r\n                    coverpic = \"https://images.unsplash.com/photo-1518791841217-8f162f1e1131?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&w=1000&q=80\"\r\n                }\r\n                this.setState({\r\n                    name, id, following, followers, tweetCount, profilepic, coverpic\r\n                })\r\n            })\r\n         })\r\n     }\r\n\r\n\r\n    render() {   \r\n\r\n        let image;\r\n\r\n        if (!this.state.coverpic) {\r\n            image= \"https://firebasestorage.googleapis.com/v0/b/directorio-de-negocios-a257b.appspot.com/o/whitefondo.jpg?alt=media&token=22ddf22f-d657-43d7-a472-c115e58c1812\";\r\n        } else {\r\n            image = this.state.coverpic\r\n        }\r\n\r\n        const style = {\r\n            height: 95+\"px\",\r\n            width: 100+\"%\",\r\n            backgroundSize: \"cover\",\r\n            backgroundPosition: \"center\",\r\n            backgroundImage: `url(${image})`,\r\n        }\r\n        \r\n        return (\r\n            <div className=\"userBox-container\">\r\n                    \r\n                    <div className=\"userBox-background\" style={style}></div>\r\n\r\n                <div className=\"userBox-content\">\r\n                    <div className=\"userBox-content-top\">\r\n                                <div className=\"userBox-content-picture\">\r\n                                    <picture>\r\n                                        {\r\n                                        this.state.profilepic ?\r\n                                        <img id=\"profile-picture\" src={this.state.profilepic}/> :\r\n                                        <img id=\"profile-picture\" src=\"https://firebasestorage.googleapis.com/v0/b/directorio-de-negocios-a257b.appspot.com/o/whitefondo.jpg?alt=media&token=22ddf22f-d657-43d7-a472-c115e58c1812\"/>\r\n                                        }\r\n                                    </picture>\r\n                                </div>\r\n                        <div className=\"userBox-content-right\">\r\n                            <Link to={`${this.state.id}`}>\r\n                                <div id=\"userBox-name\" className=\"userBox-content-name\">{this.state.name}</div>\r\n                                <div id=\"userBox-userId\" className=\"userBox-content-userId\">@{this.state.id}</div>\r\n                            </Link>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"userBox-content-information\">\r\n                       <Link to={\"\"} >\r\n                            <div className=\"userBox-content-tweets\">\r\n                                <h5 id=\"userBox-information\">Tweets</h5>\r\n                                <h5 id=\"userBox-number\">{this.state.tweetCount} </h5>\r\n                            </div> \r\n                        </Link>\r\n\r\n                        <Link to={\"\"}> \r\n                            <div className=\"userBox-content-following\">\r\n                                <h5 id=\"userBox-information\">Following</h5>\r\n                                <h5 id=\"userBox-number\">{this.state.following} </h5>\r\n                            </div> </Link>\r\n                        <Link to={\"\"}>\r\n                            <div className=\"userBox-content-followers\">\r\n                                <h5 id=\"userBox-information\">Followers</h5>\r\n                                <h5 id=\"userBox-number\">{this.state.followers} </h5>\r\n                            </div> \r\n                        </Link>\r\n                    </div>\r\n                    \r\n                </div>\r\n            </div>\r\n          );\r\n    }\r\n}\r\n \r\nexport default UserBox;","import React from 'react';\r\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\";\r\nimport {faSearch, faPeopleCarry, faComment as faReply} from \"@fortawesome/free-solid-svg-icons\";\r\n\r\nclass LandingPage extends React.Component {\r\n\r\n    logIn = this.logIn.bind(this);\r\n\r\n    emailRef = React.createRef()\r\n    passwordRef = React.createRef();\r\n\r\n    logIn(e){\r\n        e.preventDefault();\r\n\r\n        const email = this.emailRef.current.value;\r\n        const password = this.passwordRef.current.value;\r\n\r\n        this.props.logIn(email,password)\r\n    }\r\n\r\n    render(){\r\n            return (  \r\n            \r\n            <div className=\"landing-page-container\">\r\n                <div className=\"landing-page-left\">\r\n                    <div className=\"landing-page-left-text-container\">\r\n                        <div className=\"landing-page-left-1 landing-page-left-text\">\r\n                            <h3><FontAwesomeIcon icon={faSearch}/>    Twitter Clone</h3>\r\n                        </div>\r\n                        <div className=\"landing-page-left-2 landing-page-left-text\">\r\n                            <h3><FontAwesomeIcon icon={faPeopleCarry}/>    Made by:</h3>\r\n                        </div>\r\n                        <div className=\"landing-page-left-3 landing-page-left-text\">\r\n                            <h3><FontAwesomeIcon icon={faReply}/>    Ronny Legones</h3>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"landing-page-right\">\r\n                    <div className=\"landing-page-login\">\r\n                        <form onSubmit={this.logIn}>\r\n                        <input className=\"login-input\" ref={this.emailRef} type=\"text\" placeholder=\"Email or Username\"/>\r\n                        <input className=\"login-input\" ref={this.passwordRef} type=\"password\" placeholder=\"Password\"/>\r\n                        <button className=\"login-btn\" type=\"submit\" >Login</button>                        \r\n                        </form>\r\n                        <p className=\"login-forgot\">Forgot your password?</p>\r\n                    </div>\r\n\r\n\r\n                    <div className=\"landing-page-right-text-container\">\r\n                        <div className=\"landing-page-right-box\">\r\n                            <div className=\"landing-page-right-box-text\">\r\n                                <FontAwesomeIcon icon={faSearch}/>\r\n                                <h3 id=\"hola\">    Discover what is happening at this moment.</h3>\r\n                            </div>\r\n                            <div className=\"landing-page-right-box-join\">\r\n                                <h3 className=\"join-twitter\">Join Twitter today.</h3>\r\n                                <div className=\"landing-page-btn-signup\" onClick={this.props.toggleRegisterPopUp}>Sign Up</div>\r\n                                <div className=\"landing-page-btn-login\">Login</div>\r\n                            </div>\r\n                        </div>                    \r\n                    </div>\r\n                </div>\r\n\r\n                \r\n\r\n                <div className=\"landing-page-footer\">\r\n\r\n                </div>\r\n            </div>\r\n        );}\r\n}\r\n \r\nexport default LandingPage;","import React from 'react'\r\n\r\nclass RegisterPopUp extends React.Component {\r\n\r\n    register = this.register.bind(this)\r\n\r\n    refName= React.createRef()\r\n    refEmail= React.createRef()\r\n    refPassword= React.createRef()\r\n    refUserId = React.createRef()\r\n\r\n    register(e){\r\n        e.preventDefault()\r\n\r\n        const name=this.refName.current.value\r\n        const userId= this.refUserId.current.value\r\n        const email=this.refEmail.current.value\r\n        const password=this.refPassword.current.value\r\n\r\n        if (name.length < 2) {\r\n            window.alert(\"Your name is too short.\")\r\n            return null;\r\n        } else if (userId.length < 4) {\r\n            window.alert(\"Your user id is too short.\")\r\n            return null;\r\n        } else if (email.length < 5) {\r\n            window.alert (\"Your email is too short\")\r\n            return null;\r\n        } else if (password < 4){\r\n            window.alert(\"Your password is too short.\")\r\n            return null;\r\n        }\r\n\r\n        const registerData = {\r\n            name,\r\n            email,\r\n            password,\r\n            userId\r\n        }\r\n        \r\n        this.props.register(registerData);\r\n    }\r\n    render(){\r\n    return ( \r\n        <div className=\"register-popup-container\" >\r\n            <div className=\"register-popup-inner\">\r\n                <h1>Register</h1>\r\n                \r\n                <form onSubmit={this.register}>\r\n                    <div>\r\n                        <label>Name:</label>\r\n                        <input type=\"text\" maxLength={20} placeholder=\"your name\" ref={this.refName}/>\r\n                    </div>\r\n                    <div>\r\n                        <label>User ID:</label>\r\n                        <input type=\"text\" maxLength={15} placeholder=\"your id\" ref={this.refUserId}/>\r\n                    </div>\r\n                    <div>\r\n                        <label>E-mail:</label>\r\n                        <input type=\"email\" maxLength={30} placeholder=\"your email\" ref={this.refEmail}/>\r\n                    </div>\r\n                    <div>\r\n                        <label>Password:</label>\r\n                        <input type=\"text\" maxLength={16} placeholder=\"password\" ref={this.refPassword}/>\r\n                    </div>\r\n                <button type=\"submit\">Sign Up</button>\r\n                </form>\r\n                <button type=\"button\" onClick={this.props.toggleRegisterPopUp}>Close</button>\r\n            </div>\r\n        </div>\r\n     );}\r\n}\r\n \r\nexport default RegisterPopUp;","import React from 'react'\r\nimport UserBox from \"./UserBox\";\r\nimport TimeLine from \"./TimeLine\"\r\nimport firebase from \"firebase\";\r\n\r\nvar userData = {};\r\nvar propsSent = false;\r\nvar homeTweets = {};\r\nvar tweetMessage = \"\";\r\n\r\nclass LoggedLanding extends React.Component {    \r\n\r\n    componentWillMount(){\r\n\r\n    }\r\n   \r\n\r\n    render (){\r\n        const email = firebase.auth().currentUser.email\r\n        const usersDB = firebase.database().ref().child(\"users\");\r\n        const tweetsDB = firebase.database().ref().child(\"tweets\");\r\n\r\n        tweetsDB.once(\"value\", data => {\r\n            const tweets = data.val();\r\n            const keys = Object.keys(tweets);\r\n            let tweetCount = 0;\r\n            let tweetHomeCount = 0;\r\n\r\n            for (let i = 0; i < keys.length; i++) {\r\n                if (tweets[keys[i]].email === email) {\r\n                    tweetCount++;\r\n                }                \r\n            }\r\n\r\n            userData[\"tweetCount\"] = tweetCount;\r\n        })\r\n\r\n        \r\n        \r\n\r\n        usersDB.once(\"value\", data => {\r\n            const users = data.val()\r\n            const keys = Object.keys(users)\r\n\r\n            for (let i = 0; i < keys.length; i++) {\r\n               if (users[keys[i]].email === email) {\r\n                   userData[\"email\"] = email;\r\n                   userData[\"name\"] = users[keys[i]].firstName;\r\n                   userData[\"userId\"] = users[keys[i]].id;\r\n                   userData[\"following\"] = users[keys[i]].following;\r\n                   userData[\"followers\"] = users[keys[i]].folowers;\r\n               }\r\n            }\r\n        }).catch(error => {console.log(error)})\r\n\r\n        //INTERVAL FOR LOADING INFO\r\n        if (!propsSent){\r\n            var interval = setInterval(x => {\r\n                if (Boolean(userData.name) || Boolean(userData.tweetCount)) {\r\n                    clearInterval(interval)\r\n                    propsSent = true;\r\n                    this.setState({})\r\n                }\r\n            }, 2000)\r\n        }\r\n        ////////////////////////////////////////////////////////////////////\r\n\r\n        return ( \r\n            \r\n            <React.Fragment>\r\n                <div className=\"app-container\">\r\n                                <div className=\"app-left\">\r\n                                <UserBox userData={userData}/>\r\n                                </div>\r\n                    \r\n                                <div className=\"app-mid\">\r\n                                <TimeLine userData={userData}/>\r\n                                </div>\r\n\r\n                                <div className=\"app-right\">\r\n                                </div>\r\n                </div>\r\n            </React.Fragment>\r\n            \r\n        );}\r\n}\r\n \r\nexport default LoggedLanding;","import React from 'react';\r\n\r\nconst Loading = () => {\r\n    return ( \r\n        <div className=\"loading\">\r\n            <div className=\"lds-default\"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div>\r\n        </div>\r\n     );\r\n}\r\n \r\nexport default Loading;","import React, { Component } from 'react';\r\nimport firebase from \"firebase\";\r\n\r\nclass FollowButton extends Component {\r\n    state = {  }\r\n    follow = this.follow.bind(this)\r\n\r\n    follow(){\r\n        this.props.follow();\r\n    }\r\n\r\n    render() { \r\n        \r\n        return ( \r\n            <div className=\"follow-unfollow\">\r\n            <span className=\"follow-button\" onClick={this.follow}>Follow</span>\r\n            </div>\r\n         );\r\n    }\r\n}\r\n \r\nexport default FollowButton;","import React, { Component } from 'react';\r\nimport firebase from \"firebase\";\r\n\r\nclass UnfollowButton extends Component {\r\n    state = {  }\r\n\r\n    unfollow = this.unfollow.bind(this)\r\n\r\n    unfollow(){\r\n        this.props.unfollow();\r\n    }\r\n\r\n    render() { \r\n        return ( \r\n            <div className=\"follow-unfollow\">\r\n            <span className=\"unfollow-button\" onClick={this.unfollow}>Unfollow</span>\r\n            </div>\r\n         );\r\n    }\r\n}\r\n \r\nexport default UnfollowButton;","import React, { Component } from 'react';\r\nimport firebase from \"firebase\";\r\nimport FollowButton from \"./FollowButton\";\r\nimport UnfollowButton from \"./UnfollowButton\";\r\nimport {Link} from \"react-router-dom\";\r\n\r\n\r\nclass UserBoxInUserPage extends Component {\r\n    state = { \r\n        name: \"\",\r\n        id: \"\",\r\n        following: \"\",\r\n        followers: \"\",\r\n        tweetCount: \"\",\r\n        notFound: false,\r\n        followingButton: -1,\r\n        profilepic: false,\r\n        coverpic: false,\r\n     }\r\n\r\n    /* follow = this.follow.bind(this);\r\n    unfollow = this.unfollow.bind(this); */\r\n    sendToState = this.sendToState.bind(this)\r\n\r\n     sendToState(name, id, following, followers, tweetCount, followingButton,profilepic, coverpic){\r\n         this.setState({\r\n            name, id, following, followers, tweetCount, followingButton,profilepic, coverpic\r\n         })\r\n     }\r\n\r\n    componentDidMount(){\r\n\r\n        console.log(\"mounting\")\r\n\r\n        const usersDB = firebase.database().ref().child(\"users\");\r\n        const tweetsDB = firebase.database().ref().child(\"tweets\");\r\n        \r\n        let email = \"\";\r\n\r\n        let name = \"\",\r\n           id = window.location.pathname.replace(\"/twitter-clone/\", \"\"),\r\n           following = \"\",\r\n           followers = \"\",\r\n           tweetCount = 0,\r\n           followingButton = -1,\r\n           profilepic = false,\r\n           coverpic = false;\r\n\r\n           // -1 No loggeado\r\n           // 0 Sin seguir\r\n           // 1 Siguiendo\r\n        \r\n\r\n        function fromUndefinedToZero (data) {\r\n           if (typeof(data) === \"undefined\") return 0;\r\n           return data.length;\r\n       }\r\n\r\n        \r\n\r\n        usersDB.once(\"value\", data => {\r\n           const users = data.val();\r\n           const keys = Object.keys(users);\r\n\r\n           for (let i = 0; i < keys.length; i++){\r\n               if (id === users[keys[i]][\"id\"]) {\r\n                   name = users[keys[i]][\"firstName\"];\r\n                   following = fromUndefinedToZero(users[keys[i]][\"following\"]);\r\n                   followers = fromUndefinedToZero(users[keys[i]][\"followers\"]);\r\n                   email = users[keys[i]][\"email\"];\r\n                   profilepic = users[keys[i]][\"profilepic\"]\r\n                   coverpic = users[keys[i]][\"coverpic\"]                   \r\n                   break;                    \r\n               }\r\n           }\r\n\r\n          \r\n        }).then(x => {\r\n           tweetsDB.once(\"value\", data => {\r\n               const tweets = data.val();\r\n               const keys = Object.keys(tweets);\r\n\r\n               for (let i = 0; i < keys.length; i++) {\r\n                   if (email === tweets[keys[i]][\"email\"]) {\r\n                       tweetCount++;\r\n                   }\r\n               }\r\n           }).then(x => {\r\n\r\n            if (!profilepic) {\r\n                profilepic = \"https://cdn.britannica.com/67/197567-131-1645A26E.jpg\"\r\n            }\r\n            if (!coverpic) {\r\n                coverpic = \"https://images.unsplash.com/photo-1518791841217-8f162f1e1131?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&w=1000&q=80\"\r\n            }\r\n\r\n                firebase.auth().onAuthStateChanged((user) => {       \r\n                    if (user) { \r\n                        const loggedEmail = firebase.auth().currentUser.email;\r\n        \r\n                        //FOLLOWING BUTTON ACTIVATION (OR NOT)\r\n                        usersDB.once(\"value\", data => {\r\n                            const users = data.val();\r\n                            const keys = Object.keys(users);\r\n\r\n                            for (let i = 0; i < keys.length; i++){\r\n                                if (loggedEmail === users[keys[i]][\"email\"]){\r\n\r\n                                    const userId = users[keys[i]][\"id\"];\r\n\r\n                                    if (id === users[keys[i]][\"id\"]) break;\r\n\r\n                                    if (typeof(users[keys[i]][\"following\"]) == \"undefined\"){\r\n                                        followingButton = 0;\r\n                                        break;\r\n                                    }\r\n                                    \r\n                                    \r\n                                    const following = users[keys[i]][\"following\"];\r\n                                    const followingKeys = Object.keys(users[keys[i]][\"following\"]);\r\n\r\n                                    for (let j = 0; j <followingKeys.length; j++) {\r\n                                        if (id === following[followingKeys[j]]) {\r\n                                            followingButton = 1;\r\n                                            break;\r\n                                        } else {\r\n                                            followingButton = 0;\r\n                                        }\r\n                                    }\r\n                                }\r\n                            }\r\n\r\n                            this.setState({\r\n                                name, id, following, followers, tweetCount, followingButton, profilepic, coverpic\r\n                             })\r\n\r\n                        })\r\n                    } else {\r\n                        console.log(\"no user logged\", name, id, following, followers, tweetCount, followingButton)\r\n                        this.setState({\r\n                            name, id, following, followers, tweetCount, followingButton, profilepic, coverpic\r\n                         })\r\n                    }\r\n                })\r\n           })\r\n        })\r\n    }\r\n\r\n    follow = () => {\r\n        const usersDB = firebase.database().ref().child(\"users\");\r\n        const email = firebase.auth().currentUser.email;\r\n\r\n        //ID of the userPage\r\n        const id = this.state.id;\r\n\r\n        let following = undefined;\r\n        let followers = undefined;\r\n\r\n        let followingUser = \"\";\r\n\r\n        usersDB.once(\"value\", data => {\r\n            const users = data.val();\r\n            const keys = Object.keys(users)\r\n\r\n            for (let i = 0; i < keys.length; i++) {\r\n\r\n                //ADDING TO FOLLOWING\r\n                if (users[keys[i]][\"email\"] === email) {\r\n                    console.log(users[keys[i]])\r\n                    following = users[keys[i]][\"following\"]\r\n                    followingUser = users[keys[i]][\"id\"];\r\n\r\n                    if (typeof(following) === \"undefined\") {\r\n                        following = [id];\r\n                    } else {\r\n                        following.push(id);\r\n                    }\r\n                }\r\n            }\r\n\r\n            console.log(followingUser, following)\r\n\r\n            for (let i = 0; i < keys.length; i++){\r\n\r\n                //ADDING TO FOLLOWERS\r\n                if (users[keys[i]][\"id\"] === id) {\r\n                    console.log(users[keys[i]])\r\n                    followers = users[keys[i]][\"followers\"];\r\n\r\n                    if (typeof(followers) === \"undefined\") {\r\n                        followers = [followingUser];\r\n                    } else {\r\n                        followers.push(followingUser);\r\n                    }\r\n                }                \r\n            }\r\n\r\n            console.log(followers)\r\n            \r\n            usersDB.child(id).child(\"followers\").set(followers);\r\n            usersDB.child(followingUser).child(\"following\").set(following);\r\n            \r\n        }).then( x => {\r\n            console.log(\"following done\")\r\n            this.setState({\r\n                followingButton:1,\r\n                followers: this.state.followers +1\r\n            })\r\n        })\r\n    }\r\n\r\n    unfollow =() => {\r\n        const usersDB = firebase.database().ref().child(\"users\");\r\n        const email = firebase.auth().currentUser.email;\r\n\r\n        const id = this.state.id;\r\n\r\n        let following = [];\r\n        let followers = [];\r\n\r\n        let followingUser = \"\";\r\n\r\n        usersDB.once(\"value\", data => {\r\n            const users = data.val();\r\n            const keys = Object.keys(users)\r\n\r\n            for (let i = 0; i < keys.length; i++) {\r\n\r\n                //DELETE FROM FOLLOWING\r\n                if (users[keys[i]][\"email\"] === email) {\r\n                    following = users[keys[i]][\"following\"]\r\n                    followingUser = users[keys[i]][\"id\"];\r\n\r\n                    if (following.length === 1) {\r\n                        following = [];\r\n                    } else {\r\n                        following = following.filter(followedId => {\r\n                            return followedId !== id;\r\n                        })\r\n                    }\r\n                }\r\n\r\n            }\r\n\r\n            for (let i = 0; i < keys.length; i++){\r\n\r\n                //DELETE FROM FOLLOWERS\r\n                if (users[keys[i]][\"id\"] === id) {\r\n                    followers = users[keys[i]][\"followers\"];\r\n\r\n                    if (followers.length === 1) {\r\n                        followers = [];\r\n                    } else {\r\n                        followers.filter(followedId => {\r\n                            return followedId !== followingUser\r\n                        });\r\n                    }\r\n                }\r\n\r\n                \r\n            }\r\n\r\n            \r\n            usersDB.child(id).child(\"followers\").set(followers);\r\n            usersDB.child(followingUser).child(\"following\").set(following);\r\n            \r\n        }).then(x => {\r\n            this.setState({\r\n                followingButton:0,\r\n                followers: this.state.followers -1\r\n            })\r\n        })\r\n    }\r\n\r\n\r\n    render() {                \r\n\r\n        return ( \r\n            <div className=\"userBoxUP-container\">\r\n                {/* PROFILE PIC HERE  */}\r\n                {this.state.profilepic ?\r\n                <img id=\"userBoxUP-image\" src={this.state.profilepic} alt=\"profile picture\"/> :\r\n                <img id=\"userBoxUP-image\" src=\"https://firebasestorage.googleapis.com/v0/b/directorio-de-negocios-a257b.appspot.com/o/whitefondo.jpg?alt=media&token=22ddf22f-d657-43d7-a472-c115e58c1812\" alt=\"profile picture\"/>}\r\n\r\n                <h3 id=\"userBoxUP-name\">{this.state.name}</h3>\r\n                <p id=\"userBoxUP-user\">@{this.state.id}</p>\r\n                <p id=\"userBoxUP-description\">Non editable description.</p>    \r\n\r\n                \r\n\r\n                {(this.state.followingButton === -1) ? null : ((this.state.followingButton === 0) ? <FollowButton follow={this.follow}/> : <UnfollowButton unfollow={this.unfollow}/>) }\r\n\r\n                    \r\n                    <div className=\"userBox-content-information userBoxInUserPage-content\">\r\n                       <Link to={\"\"} >\r\n                            <div className=\"userBox-content-tweets\">\r\n                                <h5 id=\"userBox-information\">Tweets</h5>\r\n                                <h5 id=\"userBox-number\">{this.state.tweetCount} </h5>\r\n                            </div> \r\n                        </Link>\r\n\r\n                        <Link to={\"\"}> \r\n                            <div className=\"userBox-content-following\">\r\n                                <h5 id=\"userBox-information\">Following</h5>\r\n                                <h5 id=\"userBox-number\">{this.state.following} </h5>\r\n                            </div> </Link>\r\n                        <Link to={\"\"}>\r\n                            <div className=\"userBox-content-followers\">\r\n                                <h5 id=\"userBox-information\">Followers</h5>\r\n                                <h5 id=\"userBox-number\">{this.state.followers} </h5>\r\n                            </div> \r\n                        </Link>\r\n                    </div>\r\n\r\n            </div>\r\n         );\r\n    }\r\n}\r\n \r\nexport default UserBoxInUserPage;","import React, { Component } from 'react';\r\nimport TimeLine from \"./TimeLine\";\r\nimport firebase from \"firebase\";\r\nimport UserBoxInUserPage from './UserBoxInUserPage';\r\n\r\n\r\nclass UserPage extends Component {\r\n    state = { \r\n        loaded : false,\r\n        coverpic: false,\r\n     }\r\n\r\n     componentDidMount(){\r\n\r\n        const usersDB = firebase.database().ref().child(\"users\");\r\n        const id = this.props.id;\r\n        let coverpic = false;\r\n\r\n        usersDB.once(\"value\", data => {\r\n            const users = data.val();\r\n            const keys = Object.keys(users)\r\n            \r\n\r\n            for (let i = 0; i < keys.length; i++) {\r\n                if (id === users[keys[i]][\"id\"]) {\r\n                    if (!!users[keys[i]][\"coverpic\"]) {\r\n                        coverpic = users[keys[i]][\"coverpic\"]\r\n                    }\r\n                   \r\n                }\r\n\r\n            }\r\n        }).then(() => {\r\n            if (!coverpic) {\r\n                coverpic = \"https://images.unsplash.com/photo-1518791841217-8f162f1e1131?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&w=1000&q=80\"\r\n            }\r\n        this.setState({\r\n                    coverpic\r\n               })\r\n        })\r\n     }\r\n\r\n    render() { \r\n        let image;\r\n\r\n        if (!this.state.coverpic) {\r\n            image= \"https://firebasestorage.googleapis.com/v0/b/directorio-de-negocios-a257b.appspot.com/o/whitefondo.jpg?alt=media&token=22ddf22f-d657-43d7-a472-c115e58c1812\";\r\n        } else {\r\n            image = this.state.coverpic\r\n        }\r\n\r\n        \r\n\r\n        const style = {\r\n            height: 300+\"px\",\r\n            width: 100+\"%\",\r\n            backgroundSize: \"cover\",\r\n            backgroundPosition: \"center\",\r\n            backgroundImage: `url(${image})`,\r\n            backgroundColor: \"white\",\r\n            marginTop: \"50px\"\r\n        }\r\n        return ( \r\n            <React.Fragment>  \r\n\r\n                <div className=\"userpage-background\" style={style}></div>             \r\n\r\n                <div className=\"app-container app-container-userPage\">\r\n\r\n                \r\n                                    <div className=\"app-left\">\r\n                                    <UserBoxInUserPage/>\r\n                                    </div>\r\n                        \r\n                                    <div className=\"app-mid\">\r\n                                    <TimeLine/>\r\n                                    </div>\r\n                </div>\r\n            </React.Fragment>\r\n         );\r\n    }\r\n}\r\n \r\nexport default UserPage;","import React, { Component } from 'react';\r\nimport firebase from \"firebase\";\r\n\r\nclass ChangeThings extends Component {\r\n    state = { \r\n        profilePic: \"\",\r\n        coverPic: \"\",\r\n        loading: \"\",\r\n        completed: false,\r\n        filesToUpload: 0,\r\n        uploadedFiles: 0,\r\n        profileLink: \"\",\r\n        coverLink: \"\",\r\n     }\r\n\r\n    profilePicHandler = (e) => {\r\n\r\n         const profilePicFile = e.target.files[0]\r\n\r\n         console.log(profilePicFile)\r\n\r\n         this.setState({\r\n             profilePic: profilePicFile\r\n         })\r\n     }\r\n\r\n    coverPicHandler = (e) => {\r\n        const coverPicFile = e.target.files[0]\r\n\r\n        this.setState({\r\n            coverPic: coverPicFile\r\n        })\r\n    }\r\n\r\n    //////////////////////////////////////////////////////////////////////////\r\n\r\n    upload = (e) => {\r\n        const profilePic = this.state.profilePic;\r\n        const coverPic = this.state.coverPic;   \r\n\r\n        const usersDB = firebase.database().ref().child(\"users\");\r\n\r\n        const email = firebase.auth().currentUser.email;\r\n        const profileStorageRef = firebase.storage().ref(`/${email}/profilepics/${profilePic.name}`)\r\n        const coverStorageRef = firebase.storage().ref(`/${email}/coverpics/${coverPic.name}`)\r\n        \r\n\r\n\r\n        if (typeof(this.state.profilePic) === \"object\" && typeof(this.state.coverPic) === \"object\"){\r\n\r\n            this.setState({filesToUpload: 2})\r\n            \r\n             profileStorageRef.put(profilePic).on(\"state_changed\",snapshot => {\r\n                let percentage = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\r\n                this.setState({loading: percentage})\r\n\r\n            }, error => {\r\n                console.log(error);  \r\n\r\n            }, () => {\r\n                //UPLOAD PROFILEPIC LINK\r\n                usersDB.once(\"value\", data => {\r\n                    const users = data.val();\r\n                    const keys = Object.keys(users);\r\n\r\n                    profileStorageRef.getDownloadURL().then((url) => {\r\n                        for (let i = 0; i < keys.length; i++){\r\n                            if (users[keys[i]][\"email\"] === email) {\r\n                                usersDB.child(users[keys[i]][\"id\"]).child(\"profilepic\").set(url)                             \r\n                                break;\r\n                            }\r\n                        }\r\n                    })\r\n\r\n                    \r\n                }).then(() => {\r\n                    this.setState({\r\n                        completed: false,\r\n                        loading: 0,\r\n                        uploadedFiles: 1,\r\n                    })                    \r\n                })\r\n\r\n                //UPLOAD COVERPIC LINK\r\n                coverStorageRef.put(coverPic).on(\"state_changed\",snapshot => {\r\n                    let percentage = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\r\n                    this.setState({loading: percentage})\r\n                }, error => {\r\n                    console.log(error);                \r\n                }, () => {\r\n                    usersDB.once(\"value\", data => {\r\n                        const users = data.val();\r\n                        const keys = Object.keys(users);\r\n    \r\n                        coverStorageRef.getDownloadURL().then((url) => {\r\n                            for (let i = 0; i < keys.length; i++){\r\n                                if (users[keys[i]][\"email\"] === email) {\r\n                                    usersDB.child(users[keys[i]][\"id\"]).child(\"coverpic\").set(url)                             \r\n                                    break;\r\n                                }\r\n                            }\r\n                        })\r\n    \r\n                        \r\n                    }).then(() => {\r\n                        this.setState({\r\n                            completed: true,\r\n                            loading: 0,\r\n                            uploadedFiles: 2,\r\n                        })\r\n                    })\r\n                })\r\n            } )\r\n        } else if (typeof(this.state.profilePic) === \"object\" && typeof(this.state.coverPic) === \"string\") {\r\n            \r\n            //UPLOAD ONLY PROFILEPIC\r\n            this.setState({filesToUpload: 1})\r\n\r\n            profileStorageRef.put(profilePic).on(\"state_changed\",snapshot => {\r\n                let percentage = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\r\n                this.setState({loading: percentage})\r\n            }, error => {\r\n                console.log(error);                \r\n            }, () => {\r\n\r\n\r\n                usersDB.once(\"value\", data => {\r\n                    const users = data.val();\r\n                    const keys = Object.keys(users);\r\n\r\n                    profileStorageRef.getDownloadURL().then((url) => {\r\n                        for (let i = 0; i < keys.length; i++){\r\n                            if (users[keys[i]][\"email\"] === email) {\r\n                                usersDB.child(users[keys[i]][\"id\"]).child(\"profilepic\").set(url)                             \r\n                                break;\r\n                            }\r\n                        }\r\n                    })\r\n\r\n                    \r\n                }).then(() => {\r\n                    this.setState({\r\n                        completed: true,\r\n                        loading: 0,\r\n                        uploadedFiles: 1,\r\n                    })\r\n                })\r\n\r\n            } )\r\n\r\n        } else {\r\n\r\n            //UPLOAD ONLY COVERPIC\r\n            this.setState({filesToUpload: 1})\r\n\r\n            coverStorageRef.put(coverPic).on(\"state_changed\",snapshot => {\r\n                let percentage = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\r\n                this.setState({loading: percentage})\r\n            }, error => {\r\n                console.log(error);                \r\n            }, () => {\r\n                usersDB.once(\"value\", data => {\r\n                    const users = data.val();\r\n                    const keys = Object.keys(users);\r\n\r\n                    coverStorageRef.getDownloadURL().then((url) => {\r\n                        for (let i = 0; i < keys.length; i++){\r\n                            if (users[keys[i]][\"email\"] === email) {\r\n                                usersDB.child(users[keys[i]][\"id\"]).child(\"coverpic\").set(url)                             \r\n                                break;\r\n                            }\r\n                        }\r\n                    })\r\n\r\n                    \r\n                }).then(() => {\r\n                    this.setState({\r\n                        completed: true,\r\n                        loading: 0,\r\n                        uploadedFiles: 1,\r\n                    })\r\n                })\r\n            })\r\n        }\r\n\r\n}\r\n\r\n    toggleSettings = () => {\r\n        this.props.toggleSettings();\r\n    }\r\n\r\n    render() { \r\n\r\n        \r\n\r\n        return ( \r\n            <div className=\"changeThings-container\">\r\n                <div className=\"changeThings-content\">\r\n                    <form >\r\n                    <h3>Change Profile Picture</h3>\r\n                    <input type=\"file\" onChange={this.profilePicHandler} className=\"upload-image\" name=\"profile-picture-file\"/>\r\n                    <h3>Change Big Profile Picture</h3>\r\n                    <input type=\"file\" onChange={this.coverPicHandler} className=\"upload-image\" name=\"profileBig-picture-file\"/>\r\n                    <div className=\"changeThings-buttons\">\r\n                        {this.state.loading > 0 ? <h3>Uploading... {this.state.uploadedFiles} of {this.state.filesToUpload} </h3> : null}\r\n                        {this.state.completed ? <h3>Image{\"(s)\"} uploaded.</h3> : null}\r\n                    <button type=\"button\" onClick={this.upload} className=\"upload-button\">Upload</button>\r\n                    \r\n                    <button type=\"button\" onClick={this.toggleSettings} className=\"close-button\">Close</button>\r\n                    </div>\r\n                    </form>\r\n                </div>   \r\n            </div>\r\n         );\r\n    }\r\n}\r\n \r\nexport default ChangeThings;","import React from 'react';\nimport firebase from \"firebase\";\nimport {BrowserRouter, Switch, Link, Route} from \"react-router-dom\"\nimport Header from './components/Header';\nimport TimeLine from './components/TimeLine';\nimport UserBox from './components/UserBox';\nimport LandingPage from './components/LandingPage';\nimport RegisterPopUp from './components/RegisterPopUp';\nimport LoggedLanding from './components/LoggedLanding';\nimport Loading from './components/Loading';\nimport UserPage from './components/UserPage';\nimport ChangeThings from './components/ChangeThings';\n\nconst firebaseConfig = {\n    apiKey: \"AIzaSyCbz4cCoC6aj2XaDIpqp4E7uKfUIuLkij0\",\n    authDomain: \"directorio-de-negocios-a257b.firebaseapp.com\",\n    databaseURL: \"https://directorio-de-negocios-a257b.firebaseio.com\",\n    projectId: \"directorio-de-negocios-a257b\",\n    storageBucket: \"directorio-de-negocios-a257b.appspot.com\",\n    messagingSenderId: \"156581943217\",\n    appId: \"1:156581943217:web:2838e8736b764738\"\n}\n\nfirebase.initializeApp(firebaseConfig);\n\nconst usersDB = firebase.database().ref().child(\"users\")\nconst tweetsDB = firebase.database().ref().child(\"tweets\")\n\nlet logged = false;\nlet loading = true;\nlet firstCheck = false;\nlet stateSetted = false;\n\nconst Extructura = {\n  \"id\" : \"rojolelo\",\n  \"firstName\" : \"Ronny\",\n  \"lastName\" : \"Legones\",\n  \"email\" : [\"otrocorreo@correo.com\"],\n  \"following\": [],\n   \"followers\" : []\n}\n\n\nexport default class App extends React.Component {\n\tstate= {\n    showPopUp: false,\n    loading: loading,\n  }\n  toggleRegisterPopUp = this.toggleRegisterPopUp.bind(this)\n  register = this.register.bind(this)\n  logIn = this.logIn.bind(this)\n  logOut = this.logOut.bind(this);\n\n  loadingFalse = () => {\n    this.setState({\n      loading:false\n    })\n  }\n\n  toggleRegisterPopUp(){\n    this.setState({\n      showPopUp: !this.state.showPopUp\n    })\n  }\n\n  logIn(email, password){\n    this.setState({loading: true})\n    firebase.auth().signInWithEmailAndPassword(email, password).catch(error => {\n      if (error.code === \"auth/invalid-email\"){\n        window.alert(\"The email address is badly formatted\")\n      } else if (error.code === \"auth/wrong-password\"){\n        window.alert(\"The password you entered is incorrect\")\n      } else if (error.code === \"auth/user-not-found\"){\n        window.alert(\"The user doesnt exist.\")\n      }\n    }).then(() => {\n      firebase.auth().onAuthStateChanged(user => {\n        if (user) {\n          logged = true;\n          this.setState({\n            loading:false\n          })\n        } else {\n          this.setState({loading:false})\n        }\n      })\n    })  \n  }\n\n  logOut(){\n    firebase.auth().signOut().then(()=>{\n      logged = false;\n      window.location.replace(\"/twitter-clone/\")\n      this.setState({})\n  });\n  }\n  \n  register(userData){{\n    console.log(userData)\n\n    const {name, userId, email, password} = userData;\n\n\n    const newUser = {\n      \"id\" : userId,\n      \"firstName\" : name,\n      \"email\" : email,\n      \"following\": [],\n       \"followers\" : []\n    }\n\n    var userCredential = firebase.auth().createUserWithEmailAndPassword(email, password).catch(function(error) {\n      // Handle Errors here.\n      console.log(error.code);\n      console.log(error.message);\n      // ...\n    }).then(result => {\n      if (result) {\n        usersDB.child(userId).update(newUser)        \n      }\n      console.log(\"user in db\")\n\n      firebase.auth().signInWithEmailAndPassword(email, password).catch(error => {\n        console.log(error)\n      }).then(result => {\n        window.location.reload()\n      })  \n    })\n    \n  }}\n\n  toggleSettings = () => {\n    this.setState({\n      toggleSettings: !this.state.toggleSettings\n    })\n  }\n\n  renderLogged() {\n    return (\n      <BrowserRouter basename={process.env.PUBLIC_URL}>\n                \n                <Route exact path={\"/:id\"} render={() => {\n                    const id = window.location.pathname.replace(\"/twitter-clone/\", \"\")\n                    return (\n                      <React.Fragment>\n                        <Header logOut={this.logOut} key={id} toggleSettings={this.toggleSettings}/>\n                    \n                        {this.state.toggleSettings ? <ChangeThings toggleSettings={this.toggleSettings}/> : null}\n\n                        <UserPage key={id} id={id}/>\n                      </React.Fragment>\n                  )\n                }}/>\n                \n                <Route exact path={\"/\"} render={() => {\n                    return (\n                      <React.Fragment>\n                        <Header logOut={this.logOut} toggleSettings={this.toggleSettings}/>\n\n                        {this.state.toggleSettings ? <ChangeThings toggleSettings={this.toggleSettings}/> : null}\n                    \n                        <LoggedLanding/>\n                      </React.Fragment>\n                  )\n                }}/>\n        </BrowserRouter>\n    )\n  }\n \n  renderNoLogged(){\n    return (\n        <BrowserRouter basename={process.env.PUBLIC_URL}>\n            <Route exact path={\"/:id\"} render={() => {\n                    const id = window.location.pathname.replace(\"/twitter-clone/\", \"\")\n                    return (\n                      <React.Fragment key={id}>\n                        <Header logOut={this.logOut}/>\n                    \n                      \n                        <UserPage key={id}/>\n                      </React.Fragment>\n                  )\n                }}/>  \n\n            <Route exact path={\"/\"} render={() => {\n                return (\n                  <React.Fragment>\n                  {this.state.showPopUp ? <RegisterPopUp toggleRegisterPopUp={this.toggleRegisterPopUp} register={this.register} /> : null}\n                  {this.state.loading ? <Loading/> : null}\n                  <LandingPage \n                  logIn={this.logIn}\n                  toggleRegisterPopUp={this.toggleRegisterPopUp}/>                  \n                  </React.Fragment>\n                )\n            }}/>\n        </BrowserRouter>\n        )\n  }\n  \n\n\trender() {\n\n// Loading for checking already Logged user    \n      if (!firstCheck) {\n        firebase.auth().onAuthStateChanged(function(user) {        \n          if (user) {\n            firstCheck = true;  \n            logged=true;\n            loading = false;              \n\n          } else {\n            loading = false;\n            firstCheck = true;            \n          }\n        });        \n      } \n\n        var interval = setInterval( x => {\n          if (stateSetted === false && firstCheck) {\n            stateSetted = true;\n            this.setState({\n              loading: false\n            })\n          }\n        }, 2000)\n///////////////////////////////////////////////////      \n\n      \n\n        \n        if (logged) {          \n          return (\n            <React.Fragment>\n              {this.renderLogged()}\n            </React.Fragment>\n          )\n        } else {\n          return (\n            <React.Fragment>\n              {this.renderNoLogged()}\n            </React.Fragment>\n          )\n        } \n\t}\n}\n\n\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}